###############################################################################
# pkg-db.conf - Configuração do módulo pkg-db.sh
# Local padrão: conf/modules/pkg-db.conf
# Formato: shell script simples (key=value)
# Este arquivo define parâmetros de controle do banco de dados de build,
# logs, monitoramento e comportamento geral do sistema LFS Builder.
###############################################################################

### Diretórios e arquivos principais
PKGDB_PATH="/var/lfs/pkg-db.sqlite"            # Caminho completo do banco de dados SQLite
PKGDB_LOCKFILE="/var/lock/lfs-pkg-db.lock"     # Arquivo de lock para controle de concorrência
PKGDB_LOG_DIR="/var/lfs/logs"                  # Diretório onde logs de build são armazenados
PKGDB_BACKUP_DIR="/var/lfs/pkg-db-backups"     # Diretório para backups automáticos do banco
PKGDB_CONF="/etc/lfs-builder/pkg-db.conf"      # Caminho absoluto deste arquivo (para referência)

### Configuração do SQLite
PKGDB_WAL="yes"                                # Ativa Write-Ahead Logging (melhor desempenho e segurança)
PKGDB_BUSY_TIMEOUT=10000                       # Tempo máximo (ms) de espera quando o DB está ocupado
PKGDB_RETRY_ATTEMPTS=5                         # Tentativas de reexecução ao falhar operação
PKGDB_RETRY_BACKOFF_MS=200                     # Tempo base de espera (ms) para backoff exponencial
PKGDB_MAX_BACKUPS=10                           # Quantidade máxima de backups automáticos a manter

### Configuração de monitoramento de recursos
PKGDB_SAMPLE_INTERVAL=1                        # Intervalo (segundos) entre amostras de uso de CPU/memória/disk
PKGDB_ENABLE_RESOURCE_MONITOR="yes"            # Coletar métricas durante builds (yes/no)

### Ajustes do SQLite (avançados)
PKGDB_PRAGMA_SETTINGS="PRAGMA synchronous=NORMAL; PRAGMA temp_store=MEMORY; PRAGMA cache_size=-8000;"

### Execução e exibição
QUIET="no"                                     # Modo silencioso (yes = mostra apenas status resumido)
LOG_COLOR="yes"                                # Exibir cores no log (simples controle global)

### Caminho do ambiente chroot seguro
PKGDB_ENV_CHROOT_PATH="/mnt/lfs"               # Caminho raiz do ambiente LFS (chroot)

### Usuário e permissões
PKGDB_USER="lfs"                               # Usuário que executa o build
PKGDB_GROUP="lfs"                              # Grupo que executa o build

### Segurança e isolamento
PKGDB_USE_FLOCK="yes"                          # Habilita uso de flock para locks físicos
PKGDB_VALIDATE_SCHEMA="yes"                    # Verifica integridade do DB na inicialização

### Opções de debug
PKGDB_DEBUG="no"                               # yes = imprime SQLs e mensagens internas
PKGDB_DEBUG_LOG="/var/lfs/debug/pkg-db-debug.log"

###############################################################################
# Fim do arquivo pkg-db.conf
###############################################################################
